//@version=6
indicator("HIPA - Pivot Edge Module", overlay=true, max_lines_count=500)

// === PARAMS ===
p_left  = input.int(5, "Left bars")
p_right = input.int(3, "Right bars")

// === CORE FUNCTION ===
market_edge_get(srcHigh, srcLow, p_left, p_right) =>
    ph = ta.pivothigh(srcHigh, p_left, p_right)
    pl = ta.pivotlow(srcLow, p_left, p_right)
    [ph, pl]

// === MODULE EXECUTION ===
[ph, pl] = market_edge_get(high, low, p_left, p_right)
plotshape(not na(ph), "Pivot High", shape.triangledown, location.abovebar, color=color.red)
plotshape(not na(pl), "Pivot Low", shape.triangleup, location.belowbar, color=color.green)
